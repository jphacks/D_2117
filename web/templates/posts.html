<div class="pt-2">
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for thread in threadlist %}
      <div class="col">
        <!--迷子-->
          {% if thread.lost_flag %}
          <div class="card h-100 p-3 border-warning">
              <div class="mb-2 badge bg-warning text-wrap fs-3">
                  迷子速報！
              </div>
          {% elif thread.found_flag %}
          <div class="card h-100 p-3 border-success">
              <div class="mb-2 badge bg-success text-wrap fs-3">
                  迷子発見速報！
              </div>
          {% else %}
          <div class="card h-100 p-3">
          {% endif %}
              <img src="/static/images/{{thread.img_source}}.jpg" class='rounded img-fluid'>
              <div class="card-body">
                <div class="text-muted pb-2">
                  <ruby><rb>ペット</rb><rp>（</rp><rt>かぞく</rt><rp>）</rp></ruby>のお名前 
                  <a href="/pet/{{thread.pet_id}}" class="text-reset">{{petnamelist.filter_by(pet_id = thread.pet_id).first().pet_name}}</a>
                </div>
                <div class="pb-4">
                  <div style="white-space:pre-wrap;">{{thread.message}}</div><br>
                </div>
              </div>

              <!-- MyPageの場合は投稿削除フラグを表示-->
              {%- if request.path == "/myPage" %}
              <div class="card-footer bg-transparent">
                  <!--返信ボタン-->
                  <div class="d-grid pb-3">
                    {% if thread.lost_flag %}
                      <a class="btn btn-outline-warning" href="/thread/{{thread.thread_id}}" role="button">情報提供する</a>
                    {% elif thread.found_flag %}
                      <a class="btn btn-outline-success" href="/thread/{{thread.thread_id}}" role="button">情報提供する</a>
                    {% else %}
                      <a class="btn btn-outline-primary" href="/thread/{{thread.thread_id}}" role="button">返信する</a>
                    {% endif %}
                  </div>
                  <!--削除ボタン-->
                  <form id="mypagedelform" method="post">
                      {{ delform.csrf_token }}
                      <div class="d-grid">
                          <input type="hidden" name="thread_id" value={{thread.thread_id}}>
                          <button class="btn btn-outline-dark btn-sm" id='delete' name='delete' type=submit value='削除'>
                              投稿を削除する
                          </button>
                      </div>
                  </form>
              </div>
              {% else %}
              <div class="card-footer bg-transparent">
                  <div class="d-grid">
                    {% if thread.lost_flag %}
                    <a class="btn btn-outline-warning" href="/thread/{{thread.thread_id}}" role="button">情報提供する</a>
                    {% elif thread.found_flag %}
                      <a class="btn btn-outline-success" href="/thread/{{thread.thread_id}}" role="button">情報提供する</a>
                    {% else %}
                      <a class="btn btn-outline-primary" href="/thread/{{thread.thread_id}}" role="button">返信する</a>
                    {% endif %}
                  </div>
              </div>
              {% endif %}
          </div>
      
        
      </div>
    {% endfor %}
  </div>
</div>